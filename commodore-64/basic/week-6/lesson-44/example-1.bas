NEW
10 REM *** HIT DETECTION DEMO ***
20 PRINT CHR$(147);"SPACE FIRE  Q QUIT"
30 FOR I=832 TO 957:POKE I,0:NEXT I
40 POKE 2040,13:POKE 2041,14:POKE 2042,15
50 POKE 53269,7:POKE 53287,12:POKE 53288,1:POKE 53289,2
60 PX=160:PY=210:BX=0:BY=0:SHOT=0:COOL=0
70 ENX=80:ENY=90:DIR=2:ALIVE=1:RESPAWN=0:SCORE=0
80 R=RND(-TI)
90 GET K$:IF K$="Q" THEN END
100 IF K$="A" THEN PX=PX-4
110 IF K$="D" THEN PX=PX+4
120 IF K$="W" THEN PY=PY-3
130 IF K$="S" THEN PY=PY+3
140 IF PX<24 THEN PX=24
150 IF PX>320 THEN PX=320
160 IF PY<80 THEN PY=80
170 IF PY>233 THEN PY=233
180 POKE 53248,PX:POKE 53249,PY
190 IF K$=" " AND SHOT=0 AND COOL=0 THEN GOSUB 400
200 IF SHOT=1 THEN GOSUB 420
210 IF COOL>0 THEN COOL=COOL-1
220 IF ALIVE THEN GOSUB 480 ELSE GOSUB 500
230 COL=PEEK(53279)
240 IF (COL AND 2) AND (COL AND 4) THEN GOSUB 520
250 PRINT CHR$(19);"SCORE:";SCORE;TAB(18);"SHOT:";:IF SHOT THEN PRINT "FLYING"; ELSE PRINT "READY ";
260 IF ALIVE=0 THEN PRINT TAB(30);"TARGET RESET" ELSE PRINT TAB(30);"TARGET ACTIVE";
270 FOR D=1 TO 3:NEXT D
280 GOTO 90
400 REM *** LAUNCH ***
410 SHOT=1:BX=PX:BY=PY-16:COOL=20:POKE 53250,BX:POKE 53251,BY:POKE 53288,1
415 RETURN
420 REM *** BULLET UPDATE ***
430 BY=BY-6
440 IF BY<48 THEN SHOT=0:POKE 53251,0:RETURN
450 POKE 53250,BX:POKE 53251,BY
460 RETURN
480 REM *** ENEMY MOVE ***
490 ENX=ENX+DIR
500 IF ENX<40 OR ENX>290 THEN DIR=-DIR:ENX=ENX+DIR
510 POKE 53252,ENX:POKE 53253,ENY
520 RETURN
530 REM *** RESPAWN TIMER ***
540 RESPAWN=RESPAWN-1
550 IF RESPAWN<=0 THEN GOSUB 640
560 RETURN
580 REM *** HANDLE HIT ***
590 SHOT=0:POKE 53251,0:COOL=10
600 ALIVE=0:SCORE=SCORE+100:RESPAWN=30
610 POKE 53289,10:FOR F=1 TO 50:NEXT F:POKE 53289,2
620 POKE 53253,0
630 RETURN
640 REM *** READY NEW TARGET ***
650 ENX=40+INT(RND(1)*240)
660 ENY=70+INT(RND(1)*60)
670 IF RND(1)<.5 THEN DIR=2 ELSE DIR=-2
680 ALIVE=1:RESPAWN=0
690 POKE 53252,ENX:POKE 53253,ENY
700 RETURN
