REM *** LESSON 31: PAC-MAN WRAP ***
REM Boundaries & Wrapping

NEW
10 REM *** PAC-MAN WRAP ***
20 PRINT CHR$(147)
30 PRINT "COLLECT ALL 20 DOTS!"
40 FOR I=832 TO 894:POKE I,255:NEXT I
50 POKE 2040,13:POKE 53269,1:POKE 53287,7
60 X=160:Y=120:SC=0
70 REM PLACE 20 DOTS
80 FOR I=0 TO 19
90 DX=INT(RND(1)*35)+3
100 DY=INT(RND(1)*20)+4
110 POKE 1024+DY*40+DX,81
120 POKE 55296+DY*40+DX,7
130 NEXT I
140 GET K$
150 IF K$="W" THEN Y=Y-3
160 IF K$="S" THEN Y=Y+3
170 IF K$="A" THEN X=X-3
180 IF K$="D" THEN X=X+3
190 REM WRAP EDGES
200 IF X<24 THEN X=344
210 IF X>344 THEN X=24
220 IF Y<50 THEN Y=250
230 IF Y>250 THEN Y=50
240 POKE 53248,X:POKE 53249,Y
250 REM COLLECT DOTS
260 P=1024+INT(Y/8)*40+INT(X/8)
270 IF PEEK(P)=81 THEN POKE P,32:SC=SC+1
280 REM UPDATE SCORE
290 POKE 1030,SC/10+48
300 POKE 1031,SC AND 15+48
310 IF SC=20 THEN PRINT CHR$(19);"YOU WIN!":END
320 GOTO 140
