REM *** LESSON 32: ARCADE SURVIVOR ***
REM Health/Lives System

NEW
10 REM *** ARCADE SURVIVOR ***
20 PRINT CHR$(147)
30 PRINT "LIVES:3  SCORE:000"
40 FOR I=832 TO 894:POKE I,255:NEXT I
50 FOR I=896 TO 958:POKE I,170:NEXT I
60 POKE 2040,13:POKE 2041,14
70 POKE 53269,3:POKE 53287,7:POKE 53288,2
80 PX=100:PY=120:EX=250:EY=120:L=3:SC=0
90 REM PLACE 10 DOTS
100 FOR I=0 TO 9
110 DX=INT(RND(1)*35)+3
120 DY=INT(RND(1)*20)+4
130 POKE 1024+DY*40+DX,81
140 POKE 55296+DY*40+DX,7
150 NEXT I
160 GET K$
170 IF K$="W" THEN PY=PY-3
180 IF K$="S" THEN PY=PY+3
190 IF K$="A" THEN PX=PX-3
200 IF K$="D" THEN PX=PX+3
210 REM ENEMY AI
220 IF EX<PX THEN EX=EX+2
230 IF EX>PX THEN EX=EX-2
240 IF EY<PY THEN EY=EY+2
250 IF EY>PY THEN EY=EY-2
260 POKE 53248,PX:POKE 53249,PY
270 POKE 53250,EX:POKE 53251,EY
280 REM COLLECT DOTS
290 P=1024+INT(PY/8)*40+INT(PX/8)
300 IF PEEK(P)=81 THEN POKE P,32:SC=SC+10
310 REM COLLISION
320 C=PEEK(53279)
330 IF C>0 THEN L=L-1:PX=100:EX=250:FOR D=1 TO 30:NEXT D
340 REM UPDATE HUD
350 POKE 1030,L+48
360 POKE 1042,(SC/100)+48
370 POKE 1043,(SC/10) AND 15+48
380 POKE 1044,SC AND 15+48
390 REM CHECK STATES
400 IF L=0 THEN PRINT CHR$(19);"GAME OVER! SCORE:";SC:END
410 IF SC=100 THEN PRINT CHR$(19);"YOU WIN! LIVES:";L:END
420 GOTO 160
