NEW
10 REM *** MULTI-LEVEL LOADER ***
20 GOSUB 9000 : REM preload tables
30 LEVEL=1
40 GOSUB 1000
50 PRINT :PRINT "N = NEXT LEVEL  Q = QUIT"
60 GET K$:IF K$="Q" THEN END
70 IF K$="N" THEN LEVEL=LEVEL+1:GOSUB 1000
80 GOTO 50

9000 REM *** PREPARE ARRAYS ***
9010 DIM MAP$(10)
9020 RETURN

1000 REM *** LOAD LEVEL ***
1010 IF LEVEL>MAXLEVEL THEN LEVEL=1
1020 GOSUB 1100
1030 PRINT CHR$(147)
1040 PRINT "LEVEL";LEVEL;" - ";TITLE$
1050 PRINT
1060 FOR R=1 TO ROWS
1070 PRINT MAP$(R)
1080 NEXT R
1090 PRINT :PRINT "SPAWN:";SPAWNX;",";SPAWNY
1100 RETURN

1100 REM *** SCAN DATA FOR LEVEL ***
1110 RESTORE 5000
1120 MAXLEVEL=0
1130 READ ID:IF ID=0 THEN RETURN
1140 IF ID>MAXLEVEL THEN MAXLEVEL=ID
1150 READ ROWS:READ TITLE$
1160 IF ID=LEVEL THEN 1200
1170 FOR SK=1 TO ROWS+2:READ D$:NEXT SK
1180 GOTO 1130
1200 FOR R=1 TO ROWS:READ MAP$(R):NEXT R
1210 READ SPAWNX$:READ SPAWNY$
1215 SPAWNX=VAL(SPAWNX$):SPAWNY=VAL(SPAWNY$)
1220 RETURN

5000 DATA 1,6,"ORBIT DOCK"
5010 DATA "########################"
5020 DATA "#.......P............#"
5030 DATA "#..####......####....#"
5040 DATA "#..#..#......#..#....#"
5050 DATA "#..####..++..####....#"
5060 DATA "########################"
5070 DATA "24","18"
5080 DATA 2,6,"THERMAL SHAFT"
5090 DATA "########################"
5100 DATA "#..++++......++++...#"
5110 DATA "#..#..#......#..#...#"
5120 DATA "#..#..######..#..#..#"
5130 DATA "#........P........#"
5140 DATA "########################"
5150 DATA "10","20"
5160 DATA 3,6,"CRYSTAL CAVERN"
5170 DATA "########################"
5180 DATA "#....####..####....#"
5190 DATA "#..P....++++....P..#"
5200 DATA "#....####..####....#"
5210 DATA "#........##........#"
5220 DATA "########################"
5230 DATA "12","18"
5240 DATA 0,0,"END"
