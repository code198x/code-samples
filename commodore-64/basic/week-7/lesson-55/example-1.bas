NEW
10 REM *** SPEED TEST ***
20 GOSUB 900
30 PRINT CHR$(147);"BASIC SPEED LAB"
40 PRINT "1 = Slow star draw"
50 PRINT "2 = Optimised star draw"
60 PRINT "3 = Compare both"
70 INPUT "CHOICE";C
80 IF C=1 THEN GOSUB 1000
90 IF C=2 THEN GOSUB 2000
100 IF C=3 THEN GOSUB 3000
110 IF C=4 OR C=0 THEN END
120 GOTO 30

900 REM *** PRECOMPUTE TABLE ***
910 DIM ADR(40*5-1)
920 N=0
930 FOR Y=0 TO 4
940 BASE=1024+Y*40
950 FOR X=0 TO 39
960 ADR(N)=BASE+X
970 N=N+1
980 NEXT X
990 NEXT Y
1000 RETURN

1000 REM *** SLOW LOOP ***
1010 PRINT CHR$(147);"SLOW VERSION"
1020 TI$="000000"
1030 FOR Y=0 TO 4
1040 FOR X=0 TO 39
1050 POKE 1024+Y*40+X,42
1060 NEXT X
1070 NEXT Y
1080 T=TI
1090 PRINT "TIME:";T;" JIFFIES"
1100 RETURN

2000 REM *** FAST LOOP ***
2010 PRINT CHR$(147);"OPTIMISED VERSION"
2020 TI$="000000"
2030 FOR I=0 TO 199
2040 POKE ADR(I),42
2050 NEXT I
2060 T=TI
2070 PRINT "TIME:";T;" JIFFIES"
2080 RETURN

3000 REM *** COMPARE BOTH ***
3010 PRINT CHR$(147)
3020 TI$="000000":GOSUB 1000:SLOW=TI
3030 TI$="000000":GOSUB 2000:FAST=TI
3040 PRINT
3050 PRINT "SLOW:";SLOW;"  FAST:";FAST
3060 PRINT "SPEED-UP:";INT(SLOW/FAST*10)/10;"x"
3070 RETURN
