10 REM *** COLLISION LAYERS ***
20 PRINT CHR$(147)
30 PRINT "SCORE:0  LIVES:3"
35 R=RND(-TI)
40 FOR C=0 TO 39
50 POKE 1024+12*40+C,160:POKE 55296+12*40+C,2
60 NEXT C
70 POKE 2040,13:POKE 2041,14:POKE 2042,15
80 POKE 53269,7
90 POKE 53287,6:POKE 53288,10:POKE 53289,2
100 PX=80:PY=200:FX=280:FY=90:HX=140:HY=80:HS=2
110 LIVES=3:SCORE=0
120 GOSUB 300
130 OLDPX=PX:OLDPY=PY
140 GET K$
150 IF K$="A" THEN PX=PX-3
160 IF K$="D" THEN PX=PX+3
170 IF K$="W" THEN PY=PY-3
180 IF K$="S" THEN PY=PY+3
190 IF PX<24 THEN PX=24
200 IF PX>320 THEN PX=320
210 IF PY<60 THEN PY=60
220 IF PY>233 THEN PY=233
230 POKE 53248,PX:POKE 53249,PY
240 COLB=PEEK(53278)
250 IF COLB AND 1 THEN PX=OLDPX:PY=OLDPY:POKE 53248,PX:POKE 53249,PY
260 COLS=PEEK(53279)
270 IF COLS AND 2 THEN SCORE=SCORE+100:GOSUB 320
280 IF COLS AND 4 THEN LIVES=LIVES-1:PX=80:PY=200:GOSUB 350:IF LIVES=0 THEN PRINT CHR$(19);"GAME OVER":END
290 HY=HY+HS:IF HY<70 OR HY>200 THEN HS=-HS:HY=HY+HS
300 POKE 53250,FX:POKE 53251,FY
310 POKE 53252,HX:POKE 53253,HY
320 GOSUB 300
330 FOR D=1 TO 4:NEXT D
340 OLDPX=PX:OLDPY=PY
350 GOTO 140
300 PRINT CHR$(19);"SCORE:";SCORE;TAB(18);"LIVES:";LIVES
310 RETURN
320 FX=60+INT(RND(1)*220):FY=70+INT(RND(1)*110)
330 POKE 53250,FX:POKE 53251,FY
340 RETURN
350 HX=40+INT(RND(1)*240):HY=70+INT(RND(1)*120)
360 POKE 53252,HX:POKE 53253,HY
370 RETURN
