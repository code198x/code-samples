10 REM *** RANDOM DRONE ***
20 PRINT CHR$(147);"WASD MOVE  SPACE=QUIT  H=HOLD POSITION"
30 FOR I=832 TO 895:POKE I,0:NEXT I
40 POKE 2040,13:POKE 2041,14
50 POKE 53269,3:POKE 53287,12:POKE 53288,5:POKE 53289,2
60 PX=160:PY=200:EX=80:EY=60:DX=2:DY=0:STATE=0:BURST=0
70 R=RND(-TI)
80 GET K$:IF K$=" " THEN END
90 IF K$="A" THEN PX=PX-3
100 IF K$="D" THEN PX=PX+3
110 IF K$="W" THEN PY=PY-3
120 IF K$="S" THEN PY=PY+3
130 IF PX<24 THEN PX=24
140 IF PX>320 THEN PX=320
150 IF PY<50 THEN PY=50
160 IF PY>233 THEN PY=233
170 POKE 53248,PX:POKE 53249,PY
180 DIST=ABS(PX-EX)+ABS(PY-EY)
190 IF STATE=0 THEN GOSUB 500
200 IF STATE=1 THEN GOSUB 600
210 IF STATE=0 AND DIST<140 AND RND(1)<.3 THEN STATE=1:BURST=60:POKE 53288,10
220 IF STATE=1 AND (BURST<=0 OR DIST>200) THEN STATE=0:POKE 53288,5
230 POKE 53250,EX:POKE 53251,EY
240 PRINT CHR$(19);"DRONE:";
242 IF STATE=0 THEN PRINT "PATROL"; ELSE PRINT "CHASE";
244 PRINT TAB(25);"DIST:";DIST;"   "
250 FOR T=1 TO 2:NEXT T
260 GOTO 80
500 REM *** PATROL MODE ***
510 IF RND(1)<.05 THEN GOSUB 700
520 EX=EX+DX:EY=EY+DY
530 GOSUB 800
540 RETURN
600 REM *** CHASE MODE ***
610 BURST=BURST-1
620 IF PX>EX THEN DX=2
630 IF PX<EX THEN DX=-2
640 IF PX=EX THEN DX=0
650 IF PY>EY THEN DY=2
660 IF PY<EY THEN DY=-2
670 IF PY=EY THEN DY=0
680 EX=EX+DX:EY=EY+DY
690 GOSUB 800
695 RETURN
700 REM *** PICK NEW PATROL DIRECTION ***
710 N=INT(RND(1)*4)
720 IF N=0 THEN DX=2:DY=0
730 IF N=1 THEN DX=-2:DY=0
740 IF N=2 THEN DX=0:DY=2
750 IF N=3 THEN DX=0:DY=-2
760 RETURN
800 REM *** KEEP DRONE INSIDE ARENA ***
810 IF EX<24 THEN EX=24:DX=-DX
820 IF EX>320 THEN EX=320:DX=-DX
830 IF EY<50 THEN EY=50:DY=-DY
840 IF EY>233 THEN EY=233:DY=-DY
850 RETURN
