2000 REM --- GAMEPLAY ---
2010 GOSUB 5000             : REM load room data + rules + dialogue
2020 GOSUB 5200             : REM spawn player/enemies & random pickups
2030 GOSUB 5300             : REM draw HUD
2040 FRAME=0:STATELOOP=0
2050 TI$="000000" : TIMER=900
2060 REM MAIN GAME LOOP
2070 FRAME=FRAME+1
2080 GOSUB 5400             : REM player input + wrap
2090 GOSUB 5500             : REM enemy AI + collisions
2100 GOSUB 5300             : REM update HUD
2110 IF LIVES<=0 THEN STATE=3:GOTO 100
2120 IF SCORE>=RULEBONUS(ROOM) THEN ROOM=ROOM+1:IF ROOM>3 THEN ROOM=1
2130 IF SCORE>=RULEBONUS(ROOM) THEN STATE=2:GOTO 100
2140 IF TI>TIMER THEN STATE=3:GOTO 100
2150 GOTO 2060
