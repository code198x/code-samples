4300 REM --- GAME LOOP ---
4310 POKE SCREEN+PY*40+PX,64
4320 FOR I=0 TO 3:IF EX(I)+EY(I)=0 THEN NEXT I ELSE POKE SCREEN+(EY(I)+5)*40+(EX(I)+11),81
4330 PRINT CHR$(19)
4340 PRINT "SCORE:";RIGHT$("00000"+STR$(SCORE),5);" LIVES:";LIVES;" ROOM:";ROOM;"     ";
4350 STEP=STEP+1
4360 GOSUB 4400            : REM handle player input
4370 GOSUB 4500            : REM move enemies based on rules
4380 IF LIVES<=0 THEN RETURN
4390 TILE=MAP(PY-5,PX-11)
4400 IF TILE>1 THEN ON TILE-1 GOSUB 4600,4700
4410 GOTO 4310
