10 PRINT CHR$(147)
20 PRINT "YOU ARE IN A CAVERNOUS HALL." : PRINT "EXITS: NORTH, EAST" : PRINT "ITEMS: TORCH"
30 PRINT : INPUT "COMMAND";IN$
40 IN$=IN$+" "
50 GOSUB 1000
60 GOSUB 2000
70 GOTO 30

1000 REM --- PARSE ---
1010 VERB$="" : OBJ$=""
1020 FOR I=1 TO LEN(IN$)
1030 CH$=MID$(IN$,I,1)
1040 IF CH$>="a" AND CH$<="z" THEN CH$=CHR$(ASC(CH$)-32)
1050 MID$(IN$,I,1)=CH$
1060 NEXT I
1070 SPACEPOS=LEN(IN$)
1080 FOR I=1 TO LEN(IN$)
1090 IF MID$(IN$,I,1)=" " THEN SPACEPOS=I:I=LEN(IN$)
1100 NEXT I
1110 VERB$=LEFT$(IN$,SPACEPOS-1)
1120 OBJ$=MID$(IN$,SPACEPOS+1,LEN(IN$)-SPACEPOS)
1130 RETURN

2000 REM --- RESPOND ---
2010 IF VERB$="LOOK" THEN PRINT "THE HALL ECHOES." : RETURN
2020 IF VERB$="GO" THEN GOSUB 3000 : RETURN
2030 IF VERB$="TAKE" THEN GOSUB 4000 : RETURN
2040 PRINT "I DON'T FOLLOW." : RETURN

3000 REM --- GO ---
3010 IF OBJ$="NORTH" OR OBJ$="N" THEN PRINT "YOU HEAD NORTH." : RETURN
3020 IF OBJ$="EAST" OR OBJ$="E" THEN PRINT "YOU HEAD EAST." : RETURN
3030 PRINT "YOU BUMP INTO WALLS." : RETURN

4000 REM --- TAKE ---
4010 IF OBJ$="TORCH" THEN PRINT "YOU TAKE THE TORCH." : RETURN
4020 PRINT "THERE IS NO ";OBJ$;" HERE." : RETURN
