check_enemy_collision:
    ; Skip if invulnerable
    lda invuln_timer
    bne @done           ; timer > 0 means invulnerable

    ldx #0              ; enemy index

@loop:
    ; ... existing collision math ...
    ; (check enemy_x[x], enemy_y[x] against player position)
    ; If collision detected, call lose_life instead of setting game_state

    inx
    cpx #4
    bne @loop

@done:
    rts
