update_player_sprite:
    ; Check if invulnerable and should hide
    lda invuln_timer
    beq @visible        ; not invulnerable, always visible

    and #%00000100      ; check bit 2 (changes every 4 frames)
    beq @hidden         ; if clear, hide sprite

@visible:
    ; Normal sprite update
    lda player_y
    sta $0200           ; Y position
    lda #1              ; tile index
    sta $0201
    lda #0              ; attributes
    sta $0202
    lda player_x
    sta $0203           ; X position
    rts

@hidden:
    ; Move sprite off-screen
    lda #$FF
    sta $0200           ; Y = 255 (off bottom of screen)
    rts
